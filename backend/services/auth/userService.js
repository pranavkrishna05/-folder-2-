const userRepository = require('../../repositories/userRepository');const emailValidator = require('email-validator');const passwordValidator = require('password-validator');const { sendConfirmationEmail } = require('../../integrations/emailService');const schema = new passwordValidator();schema  .is().min(8)  .is().max(100)  .has().uppercase()  .has().lowercase()  .has().digits()  .has().not().spaces();const registerUser = async (email, password) => {  if (!emailValidator.validate(email)) {    throw new Error('Invalid email format');  }  if (!schema.validate(password)) {    throw new Error('Password does not meet complexity requirements');  }  const existingUser = await userRepository.findByEmail(email);  if (existingUser) {    throw new Error('Email is already in use');  }  const user = await userRepository.create({ email, password });  await sendConfirmationEmail(email);  return user;};module.exports = { registerUser };